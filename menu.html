<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Vauleza | Cardápio</title>

  <!-- Favicon -->
  <link rel="shortcut icon" href="images/favicon.png">

  <!-- CSS -->
  <link rel="stylesheet" href="css/bootstrap.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-nice-select/1.1.0/css/nice-select.min.css">
  <link rel="stylesheet" href="css/font-awesome.min.css">
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="css/responsive.css">
  <style>
    /* Estilos do Carrinho Popup */
    #openCartBtn {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: #ff9800;
      color: white;
      border: none;
      padding: 10px 15px;
      cursor: pointer;
      font-weight: bold;
      border-radius: 4px;
      z-index: 9999;
    }

    #cartPopup {
      position: fixed;
      bottom: 70px;
      right: 20px;
      width: 320px;
      max-height: 80vh;
      background: white;
      border: 1px solid #ccc;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
      padding: 15px;
      overflow-y: auto;
      display: none;
      z-index: 10000;
      border-radius: 6px;
      transition: transform 0.3s ease, opacity 0.3s ease;
      transform: translateY(20px);
      opacity: 0;
    }

    #cartPopup.show {
      transform: translateY(0);
      opacity: 1;
      display: block;
    }

    #cartPopup .cart-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
    }

    #cartPopup .close-btn {
      font-size: 22px;
      background: transparent;
      border: none;
      cursor: pointer;
    }

    .cart-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 12px;
      border-bottom: 1px solid #eee;
      padding-bottom: 8px;
    }

    .cart-item-name {
      flex: 1;
    }

    .qty-controls {
      display: flex;
      align-items: center;
      gap: 5px;
    }

    .qty-btn {
      background: #ddd;
      border: none;
      padding: 3px 8px;
      font-weight: bold;
      cursor: pointer;
      border-radius: 3px;
    }

    .qty-display {
      min-width: 20px;
      text-align: center;
      font-weight: bold;
    }

    .item-price {
      margin-left: 10px;
      font-weight: bold;
    }

    .cart-footer {
      margin-top: 15px;
      border-top: 1px solid #ccc;
      padding-top: 12px;
      text-align: right;
    }

    .cart-footer strong {
      font-size: 18px;
    }

    .checkout-btn {
      margin-top: 10px;
      background: #28a745;
      color: white;
      border: none;
      padding: 10px 15px;
      cursor: pointer;
      border-radius: 4px;
      font-weight: bold;
    }

    .add-to-cart.added {
      color: green;
      transform: scale(1.1);
      transition: all 0.3s ease;
    }

    /* Search Bar Styles */
    .search-container {
      max-width: 600px;
      margin: 0 auto 30px;
    }

    #menuSearch {
      height: 45px;
      border-radius: 4px 0 0 4px;
      border: 1px solid #ced4da;
      padding: 10px;
    }

    #searchButton {
      height: 45px;
      border-radius: 0 4px 4px 0;
      background-color: #ff9800;
      color: white;
      border: none;
      padding: 0 20px;
      cursor: pointer;
    }

    #searchButton:hover {
      background-color: #e68a00;
    }

    /* Layout Corrections */
    .filters-content .row {
      display: flex;
      flex-wrap: wrap;
      transition: all 0.3s ease;
    }

    .col-sm-6 {
      transition: all 0.3s ease;
      display: block !important;
    }

    .hidden-item {
      display: none !important;
      width: 0;
      height: 0;
      overflow: hidden;
      padding: 0;
      margin: 0;
      opacity: 0;
    }

    .no-results-message {
      width: 100%;
      text-align: center;
      padding: 40px 0;
      font-size: 1.2rem;
      color: #666;
      order: 999;
    }

    .grid-item {
      width: calc(33.333% - 30px);
      margin: 15px;
    }

    @media (max-width: 992px) {
      .grid-item {
        width: calc(50% - 30px);
      }
    }

    @media (max-width: 768px) {
      .grid-item {
        width: 100%;
        margin: 10px 0;
      }

      .search-container {
        padding: 0 15px;
      }
    }

    @media (max-width: 480px) {
      #cartPopup {
        width: 280px;
        right: 10px;
      }
    }
  </style>
</head>

<body class="sub_page">
  <!-- Hero Area -->
  <div class="hero_area">
    <div class="bg-box">
      <img src="images/hero-bg.jpg" alt="Background do restaurante">
    </div>

    <!-- header section strats -->
    <header class="header_section">
      <div class="container">
        <nav class="navbar navbar-expand-lg custom_nav-container ">
          <a class="navbar-brand" href="index.html">
            <span>
              Vauleza
            </span>
          </a>

          <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class=""> </span>
          </button>

          <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav  mx-auto ">
              <li class="nav-item">
                <a class="nav-link" href="index.html">Inicio </a>
              </li>
              <li class="nav-item active">
                <a class="nav-link" href="menu.html">Cardapio <span class="sr-only">(current)</span> </a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="about.html">Sobre</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="book.html">Localizacao</a>
              </li>
            </ul>
            <div class="user_option">
              <a href="" class="user_link">
                <i class="fa fa-user" aria-hidden="true"></i>
              </a>
              <a class="cart_link" href="#" id="headerCartBtn">
                <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg"
                  xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 456.029 456.029"
                  style="enable-background:new 0 0 456.029 456.029;" xml:space="preserve">
                  <g>
                    <g>
                      <path d="M345.6,338.862c-29.184,0-53.248,23.552-53.248,53.248c0,29.184,23.552,53.248,53.248,53.248
                   c29.184,0,53.248-23.552,53.248-53.248C398.336,362.926,374.784,338.862,345.6,338.862z" />
                    </g>
                  </g>
                  <g>
                    <g>
                      <path d="M439.296,84.91c-1.024,0-2.56-0.512-4.096-0.512H112.64l-5.12-34.304C104.448,27.566,84.992,10.67,61.952,10.67H20.48
                   C9.216,10.67,0,19.886,0,31.15c0,11.264,9.216,20.48,20.48,20.48h41.472c2.56,0,4.608,2.048,5.12,4.608l31.744,216.064
                   c4.096,27.136,27.648,47.616,55.296,47.616h212.992c26.624,0,49.664-18.944,55.296-45.056l33.28-166.4
                   C457.728,97.71,450.56,86.958,439.296,84.91z" />
                    </g>
                  </g>
                  <g>
                    <g>
                      <path d="M215.04,389.55c-1.024-28.16-24.576-50.688-52.736-50.688c-29.696,1.536-52.224,26.112-51.2,55.296
                   c1.024,28.16,24.064,50.688,52.224,50.688h1.024C193.536,443.31,216.576,418.734,215.04,389.55z" />
                    </g>
                  </g>
                  <g>
                  </g>
                  <g>
                  </g>
                  <g>
                  </g>
                  <g>
                  </g>
                  <g>
                  </g>
                  <g>
                  </g>
                  <g>
                  </g>
                  <g>
                  </g>
                  <g>
                  </g>
                  <g>
                  </g>
                  <g>
                  </g>
                  <g>
                  </g>
                  <g>
                  </g>
                  <g>
                  </g>
                  <g>
                  </g>
                </svg>
              </a>
              <form class="form-inline">
                <button class="btn  my-2 my-sm-0 nav_search-btn" type="submit">
                  <i class="fa fa-search" aria-hidden="true"></i>
                </button>
              </form>
              <a href="" class="order_online">
                Contato
              </a>
            </div>
          </div>
        </nav>
      </div>
    </header>
    <!-- end header section -->
  </div>

  <!-- Menu Section -->
  <section class="food_section layout_padding">
    <div class="container">
      <div class="heading_container heading_center">
        <h2>Nosso Cardápio</h2>
      </div>

      <!-- Search Bar -->
      <div class="search-container mb-4">
        <div class="input-group">
          <input type="text" id="menuSearch" class="form-control" placeholder="Pesquisar itens no cardápio...">
          <div class="input-group-append">
            <button class="btn btn-outline-secondary" type="button" id="searchButton">
              <i class="fa fa-search"></i>
            </button>
          </div>
        </div>
      </div>

      <!-- Menu Filters -->
      <ul class="filters_menu">
        <li class="active" data-filter="*">Tudo</li>
        <li data-filter=".burger">Hambúrguer</li>
        <li data-filter=".pizza">Pizza</li>
        <li data-filter=".pasta">Esfirras</li>
        <li data-filter=".fries">Batatas</li>
      </ul>

      <!-- Menu Items -->
      <div class="filters-content">
        <div class="row grid">
          <!-- Pizza Item 1 -->
          <div class="col-sm-6 col-lg-4 all pizza">
            <div class="box">
              <div class="img-box"><img src="images/f1.png" alt="Pizza A Moda"></div>
              <div class="detail-box">
                <h5>A Moda</h5>
                <p>Mussarela, calabresa, presunto, ovo, ervilha, milho verde e azeitona</p>
                <div class="options">
                  <h6>R$16.50</h6>
                  <a href="#" class="add-to-cart" data-name="Pizza A Moda" data-price="16.50"><i
                      class="fa fa-shopping-cart"></i></a>
                </div>
              </div>
            </div>
          </div>

          <!-- Burger Item 1 -->
          <div class="col-sm-6 col-lg-4 all burger">
            <div class="box">
              <div class="img-box"><img src="images/f2.png" alt="Hambúrguer Delicioso"></div>
              <div class="detail-box">
                <h5>Hambúrguer Delicioso</h5>
                <p>Pão artesanal, carne 180g, queijo, alface, tomate e molho especial</p>
                <div class="options">
                  <h6>R$15</h6>
                  <a href="#" class="add-to-cart" data-name="Hambúrguer Delicioso" data-price="15.00"><i
                      class="fa fa-shopping-cart"></i></a>
                </div>
              </div>
            </div>
          </div>

          <!-- Pizza Item 2 -->
          <div class="col-sm-6 col-lg-4 all pizza">
            <div class="box">
              <div class="img-box"><img src="images/f3.png" alt="Pizza Margherita"></div>
              <div class="detail-box">
                <h5>Pizza Margherita</h5>
                <p>Mussarela, tomate fresco, manjericão e azeite de oliva</p>
                <div class="options">
                  <h6>R$17</h6>
                  <a href="#" class="add-to-cart" data-name="Pizza Margherita" data-price="17.00"><i
                      class="fa fa-shopping-cart"></i></a>
                </div>
              </div>
            </div>
          </div>

          <!-- Pasta Item 1 -->
          <div class="col-sm-6 col-lg-4 all pasta">
            <div class="box">
              <div class="img-box"><img src="images/f4.png" alt="Esfirra de Carne"></div>
              <div class="detail-box">
                <h5>Esfirra de Carne</h5>
                <p>Massa fina recheada com carne temperada e especiarias</p>
                <div class="options">
                  <h6>R$18</h6>
                  <a href="#" class="add-to-cart" data-name="Esfirra de Carne" data-price="18.00"><i
                      class="fa fa-shopping-cart"></i></a>
                </div>
              </div>
            </div>
          </div>

          <!-- Fries Item 1 -->
          <div class="col-sm-6 col-lg-4 all fries">
            <div class="box">
              <div class="img-box"><img src="images/f5.png" alt="Batata Frita"></div>
              <div class="detail-box">
                <h5>Batata Frita</h5>
                <p>Porção de batata frita crocante com molhos à escolha</p>
                <div class="options">
                  <h6>R$10</h6>
                  <a href="#" class="add-to-cart" data-name="Batata Frita" data-price="10.00"><i
                      class="fa fa-shopping-cart"></i></a>
                </div>
              </div>
            </div>
          </div>

          <!-- Pizza Item 3 -->
          <div class="col-sm-6 col-lg-4 all pizza">
            <div class="box">
              <div class="img-box"><img src="images/f6.png" alt="Pizza Calabresa"></div>
              <div class="detail-box">
                <h5>Pizza Calabresa</h5>
                <p>Mussarela, calabresa fatiada e cebola</p>
                <div class="options">
                  <h6>R$15</h6>
                  <a href="#" class="add-to-cart" data-name="Pizza Calabresa" data-price="15.00"><i
                      class="fa fa-shopping-cart"></i></a>
                </div>
              </div>
            </div>
          </div>

          <!-- Burger Item 2 -->
          <div class="col-sm-6 col-lg-4 all burger">
            <div class="box">
              <div class="img-box"><img src="images/f7.png" alt="Hambúrguer Bacon"></div>
              <div class="detail-box">
                <h5>Hambúrguer Bacon</h5>
                <p>Pão brioche, carne 180g, queijo, bacon crocante e molho barbecue</p>
                <div class="options">
                  <h6>R$12</h6>
                  <a href="#" class="add-to-cart" data-name="Hambúrguer Bacon" data-price="12.00"><i
                      class="fa fa-shopping-cart"></i></a>
                </div>
              </div>
            </div>
          </div>

          <!-- Burger Item 3 -->
          <div class="col-sm-6 col-lg-4 all burger">
            <div class="box">
              <div class="img-box"><img src="images/f8.png" alt="Hambúrguer Vegetariano"></div>
              <div class="detail-box">
                <h5>Hambúrguer Vegetariano</h5>
                <p>Pão integral, hambúrguer de grão-de-bico, queijo e vegetais frescos</p>
                <div class="options">
                  <h6>R$14</h6>
                  <a href="#" class="add-to-cart" data-name="Hambúrguer Vegetariano" data-price="14.00"><i
                      class="fa fa-shopping-cart"></i></a>
                </div>
              </div>
            </div>
          </div>

          <!-- Pasta Item 2 -->
          <div class="col-sm-6 col-lg-4 all pasta">
            <div class="box">
              <div class="img-box"><img src="images/f9.png" alt="Esfirra de Frango"></div>
              <div class="detail-box">
                <h5>Esfirra de Frango</h5>
                <p>Massa fina recheada com frango desfiado e especiarias</p>
                <div class="options">
                  <h6>R$10</h6>
                  <a href="#" class="add-to-cart" data-name="Esfirra de Frango" data-price="10.00"><i
                      class="fa fa-shopping-cart"></i></a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="btn-box">
        <a href="https://api.whatsapp.com/send?phone=5511900000000&text=Ol%C3%A1.%20Seja%20muito%20bem%20vindo%20ao%20Vauleza%20Pizzaria%20e%20Lanchonete.%20Escolha%20o%20seu%20sabor%20e%20nos%20envie.%20O%20link%20do%20nosso%20card%C3%A1pio%20digital%20%C3%A9:%20https://vauleza.cardapio.top"
          target="_blank">
          Pedido pelo WhatsApp
        </a>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="footer_section">
    <div class="container">
      <div class="row">
        <div class="col-md-4 footer-col">
          <div class="footer_contact">
            <h4>Contato</h4>
            <div class="contact_link_box">
              <a href="#"><i class="fa fa-map-marker"></i> <span>Endereço do Restaurante</span></a>
              <a href="#"><i class="fa fa-phone"></i> <span>+55 11 98765-4321</span></a>
              <a href="#"><i class="fa fa-envelope"></i> <span>contato@vauleza.com</span></a>
            </div>
          </div>
        </div>

        <div class="col-md-4 footer-col">
          <div class="footer_detail">
            <a href="index.html" class="footer-logo">Vauleza</a>
            <p>O melhor da culinária em um só lugar. Qualidade e sabor inigualáveis.</p>
            <div class="footer_social">
              <a href="#"><i class="fa fa-facebook"></i></a>
              <a href="#"><i class="fa fa-instagram"></i></a>
              <a href="#"><i class="fa fa-whatsapp"></i></a>
            </div>
          </div>
        </div>

        <div class="col-md-4 footer-col">
          <h4>Horário de Funcionamento</h4>
          <p>Segunda a Sábado</p>
          <p>11:00 - 22:00</p>
          <p>Domingo</p>
          <p>11:00 - 20:00</p>
        </div>
      </div>

      <div class="footer-info">
        <p>&copy; <span id="displayYear"></span> Vauleza - Todos os direitos reservados</p>
      </div>
    </div>
  </footer>

  <!-- Botão para abrir o carrinho -->
  <button id="openCartBtn">Carrinho (0)</button>

  <!-- Popup do carrinho -->
  <div id="cartPopup">
    <div class="cart-header">
      <h3>Meu Carrinho</h3>
      <button class="close-btn" id="closeCartBtn">&times;</button>
    </div>
    <div id="cartItems"></div>
    <div class="cart-footer">
      <strong>Subtotal: R$ <span id="cartSubtotal">0.00</span></strong>
      <br />
      <button class="checkout-btn" id="checkoutBtn" disabled>Finalizar Compra</button>
    </div>
  </div>

  <!-- JavaScript -->
  <script src="js/jquery-3.4.1.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
  <script src="js/bootstrap.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js"></script>
  <script src="https://unpkg.com/isotope-layout@3.0.4/dist/isotope.pkgd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-nice-select/1.1.0/js/jquery.nice-select.min.js"></script>
  <script src="js/custom.js"></script>
  <script>
    // Objeto do carrinho: chave = nome produto, valor = { qty, price }
    const cart = {};

    // Elementos
    const openCartBtn = document.getElementById('openCartBtn');
    const headerCartBtn = document.getElementById('headerCartBtn');
    const cartPopup = document.getElementById('cartPopup');
    const closeCartBtn = document.getElementById('closeCartBtn');
    const cartItemsContainer = document.getElementById('cartItems');
    const cartSubtotalElem = document.getElementById('cartSubtotal');
    const checkoutBtn = document.getElementById('checkoutBtn');
    const menuSearch = document.getElementById('menuSearch');
    const searchButton = document.getElementById('searchButton');

    // Atualiza o botão abrir carrinho com quantidade total
    function updateCartButton() {
      const totalQty = Object.values(cart).reduce((sum, item) => sum + item.qty, 0);
      openCartBtn.textContent = `Carrinho (${totalQty})`;
    }

    // Abre/fecha carrinho popup
    function toggleCart() {
      cartPopup.classList.toggle('show');
    }

    // Atualiza o conteúdo do carrinho na interface
    function renderCart() {
      cartItemsContainer.innerHTML = '';

      let subtotal = 0;
      const keys = Object.keys(cart);

      if (keys.length === 0) {
        cartItemsContainer.innerHTML = '<p>Seu carrinho está vazio.</p>';
        checkoutBtn.disabled = true;
        cartSubtotalElem.textContent = '0.00';
        updateCartButton();
        return;
      }

      keys.forEach(name => {
        const item = cart[name];
        subtotal += item.price * item.qty;

        // Cria div do item
        const itemDiv = document.createElement('div');
        itemDiv.className = 'cart-item';

        itemDiv.innerHTML = `
          <div class="cart-item-name">${name}</div>
          <div class="qty-controls">
            <button class="qty-btn" data-name="${name}" data-action="decrease">-</button>
            <div class="qty-display">${item.qty}</div>
            <button class="qty-btn" data-name="${name}" data-action="increase">+</button>
            <div class="item-price">R$ ${(item.price * item.qty).toFixed(2)}</div>
          </div>
        `;

        cartItemsContainer.appendChild(itemDiv);
      });

      cartSubtotalElem.textContent = subtotal.toFixed(2);
      checkoutBtn.disabled = false;
      updateCartButton();
    }

    // Adiciona produto ao carrinho
    function addToCart(event, name, price) {
      if (!name || isNaN(price) || price <= 0) {
        console.error('Dados do produto inválidos');
        return;
      }

      if (!cart[name]) {
        cart[name] = { qty: 1, price: parseFloat(price) };
      } else {
        cart[name].qty += 1;
      }

      renderCart();

      // Feedback visual
      const btn = event.target.closest('.add-to-cart');
      btn.classList.add('added');
      setTimeout(() => btn.classList.remove('added'), 500);

      // Abrir carrinho ao adicionar
      cartPopup.classList.add('show');
    }

    // Altera quantidade do item no carrinho
    function changeQty(name, action) {
      if (!cart[name]) return;

      if (action === 'increase') {
        cart[name].qty += 1;
      } else if (action === 'decrease') {
        cart[name].qty -= 1;
        if (cart[name].qty <= 0) {
          delete cart[name];
        }
      }
      renderCart();
    }

    // Função de pesquisa no menu
    function searchMenu() {
      const searchTerm = menuSearch.value.toLowerCase().trim();
      const activeFilter = document.querySelector('.filters_menu li.active').getAttribute('data-filter');

      // Remove mensagem anterior se existir
      const previousMessage = document.querySelector('.no-results-message');
      if (previousMessage) previousMessage.remove();

      let hasResults = false;

      // Percorre todos os itens do menu
      document.querySelectorAll('.grid .col-sm-6').forEach(item => {
        const itemTitle = item.querySelector('h5').textContent.toLowerCase();
        const itemCategory = item.classList;
        let shouldShow = false;

        // Verifica se corresponde ao filtro ativo
        const matchesFilter = activeFilter === '*' || itemCategory.contains(activeFilter.replace('.', ''));

        // Verifica se corresponde à pesquisa (apenas pelo título)
        const matchesSearch = searchTerm === '' || itemTitle.includes(searchTerm);

        // Decide se deve mostrar o item
        if (matchesFilter && matchesSearch) {
          item.classList.remove('hidden-item');
          hasResults = true;
        } else {
          item.classList.add('hidden-item');
        }
      });

      // Se não houver resultados, mostra mensagem
      if (!hasResults && searchTerm) {
        const noResults = document.createElement('div');
        noResults.className = 'no-results-message col-12';
        noResults.innerHTML = `<p>Nenhum produto encontrado com "${searchTerm}"</p>`;
        document.querySelector('.filters-content .row').appendChild(noResults);
      }

      // Reorganiza o layout
      reorganizarLayout();
    }

    // Função para reorganizar o layout
    function reorganizarLayout() {
      const row = document.querySelector('.filters-content .row');
      const visibleItems = Array.from(document.querySelectorAll('.grid .col-sm-6:not(.hidden-item)'));

      // Reorganiza os itens visíveis mantendo a ordem original
      visibleItems.forEach((item, index) => {
        // Remove classes de ordenação anteriores
        item.classList.remove('order-first', 'order-last', 'order-md-0', 'order-md-1');

        // Adiciona classes de ordenação baseadas na posição
        if (index % 2 === 0) {
          item.classList.add('order-first');
        } else {
          item.classList.add('order-last');
        }
      });

      // Força redesenho do layout
      if (window.Isotope) {
        const iso = new Isotope('.grid', {
          itemSelector: '.col-sm-6',
          layoutMode: 'fitRows'
        });
        iso.layout();
      }
    }

    // Aplica filtro de categoria
    function applyFilter(filter) {
      // Limpa a pesquisa
      menuSearch.value = '';

      // Remove mensagem de nenhum resultado se existir
      const previousMessage = document.querySelector('.no-results-message');
      if (previousMessage) previousMessage.remove();

      // Percorre todos os itens do menu
      document.querySelectorAll('.grid .col-sm-6').forEach(item => {
        const itemCategory = item.classList;

        // Verifica se corresponde ao filtro selecionado
        if (filter === '*' || itemCategory.contains(filter.replace('.', ''))) {
          item.classList.remove('hidden-item');
        } else {
          item.classList.add('hidden-item');
        }
      });

      // Reorganiza o layout
      reorganizarLayout();
    }

    // Eventos

    // Botão abrir carrinho
    openCartBtn.addEventListener('click', toggleCart);

    // Ícone do carrinho no header
    headerCartBtn.addEventListener('click', (e) => {
      e.preventDefault();
      toggleCart();
    });

    // Botão fechar carrinho
    closeCartBtn.addEventListener('click', toggleCart);

    // Eventos para botões + e - dentro do carrinho (delegação)
    cartItemsContainer.addEventListener('click', e => {
      if (e.target.classList.contains('qty-btn')) {
        const name = e.target.dataset.name;
        const action = e.target.dataset.action;
        changeQty(name, action);
      }
    });

    // Botões adicionar produto (dos itens do cardápio)
    document.querySelectorAll('.add-to-cart').forEach(btn => {
      btn.addEventListener('click', (e) => {
        e.preventDefault();
        const name = btn.dataset.name;
        const price = btn.dataset.price;
        addToCart(e, name, price);
      });
    });

    // Botão finalizar compra
    checkoutBtn.addEventListener('click', () => {
      try {
        if (typeof (Storage) !== "undefined") {
          localStorage.setItem('vaulezaCart', JSON.stringify(cart));
          localStorage.setItem('vaulezaSubtotal', cartSubtotalElem.textContent);
          window.location.href = 'final.html';
        } else {
          alert('Seu navegador não suporta armazenamento local. Não é possível finalizar a compra.');
        }
      } catch (e) {
        console.error('Erro ao salvar carrinho:', e);
        alert('Ocorreu um erro ao processar seu pedido. Tente novamente.');
      }
    });

    // Fechar carrinho ao clicar fora
    document.addEventListener('click', (e) => {
      if (!cartPopup.contains(e.target) &&
        e.target !== openCartBtn &&
        e.target !== headerCartBtn &&
        !headerCartBtn.contains(e.target)) {
        cartPopup.classList.remove('show');
      }
    });

    // Eventos da barra de pesquisa
    searchButton.addEventListener('click', searchMenu);
    menuSearch.addEventListener('keyup', function (e) {
      if (e.key === 'Enter') {
        searchMenu();
      }
    });

    // Eventos dos filtros de categoria
    document.querySelectorAll('.filters_menu li').forEach(item => {
      item.addEventListener('click', function () {
        // Remove a classe active de todos os itens
        document.querySelectorAll('.filters_menu li').forEach(li => {
          li.classList.remove('active');
        });

        // Adiciona a classe active apenas no item clicado
        this.classList.add('active');

        // Aplica o filtro
        const filter = this.getAttribute('data-filter');
        applyFilter(filter);
      });
    });

    // Inicializa
    renderCart();
    // Inicializa Isotope para o layout
    if (window.Isotope) {
      new Isotope('.grid', {
        itemSelector: '.col-sm-6',
        layoutMode: 'fitRows'
      });
    }
  </script>
</body>

</html>